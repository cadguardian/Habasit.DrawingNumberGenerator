@page "/drawing-form"
@using Client.Services
@using DNG.Library.Data
@using DNG.Library.Models
@inject IDrawingNumber DrawingNumber
@inject IDrawingRequest DrawingRequest
@inject IDrawingRequestProcessor DrawingRequestProcessor

@code {
    private bool isFormVisible = true;
    [Parameter] public RenderFragment? FormContent { get; set; }
}

<div class="container-fluid">
    @if (isFormVisible)
    {
        <div class="container">
            @FormContent
            <div class="d-flex justify-content-center align-items-center m-4">
                <button type="button" class="btn btn btn-lg btn-dark no-print"
                        @onclick="() => { DrawingRequestProcessor.GenerateDrawingNumber(); isFormVisible = false; }">
                    Verify
                </button>
            </div>
        </div>
    }
    else
    {
        <div class="summary-dashboard">
            <InputGroupTitle Title="Drawing Request and Code Generation" Subtitle="Dynamic Drawing Definition" Description="This section provides a breakdown of the drawing request details and auto-generated drawing codes. Both respond dynamically to user-entered values, defining the unique specifications and identifiers for the drawing." />


            <!-- Two columns on all screen sizes -->
            <div class="row row-cols-2 -1">
                <!-- Left column: Drawing Request fields -->
                <div class="col">
                    <div class="p-2 bg-white rounded shadow-sm p-4 mt-3">
                        <h6 class="small-heading">Drawing Request</h6>
                        <ul class="list-unstyled mb-0">
                            <li><strong>Type:</strong> @DrawingRequest.BeltType</li>
                            <li><strong>Series:</strong> @DrawingRequest.BeltSeries</li>
                            <li><strong>Color:</strong> @DrawingRequest.Color</li>
                            <li><strong>Material:</strong> @DrawingRequest.Material</li>
                            <li><strong>Adder Material:</strong> @DrawingRequest.AdderMaterial</li>
                            <li><strong>Rod:</strong> @DrawingRequest.RodMaterial</li>
                            <li><strong>Belt Width:</strong> @DrawingRequest.BeltWidth</li>
                            <li><strong>Flights Rollers Grip:</strong> @DrawingRequest.FlightsRollersGrip</li>
                            <li><strong>Qty Rollers Across Width:</strong> @DrawingRequest.QtyRollersAcrossWidth</li>
                            <li><strong>FRG Centers:</strong> @DrawingRequest.FRGCenters</li>
                            <li><strong>Belt Accessories:</strong> @DrawingRequest.BeltAccessories</li>
                            <li><strong>Friction/Anti Static:</strong> @DrawingRequest.FrictionAntiStatic</li>
                            <li><strong>Side-PL/Lane-DV:</strong> @DrawingRequest.SidePLLaneDV</li>
                            <li><strong>Unique Identification:</strong> @DrawingRequest.UniqueIdentification</li>
                            <li><strong>Indent Code:</strong> @DrawingRequest.IndentCode</li>
                        </ul>
                    </div>
                </div>

                <!-- Right column: Drawing Number fields -->
                <div class="col">
                    <div class="p-2 bg-white rounded shadow-sm p-4 mt-3">
                        <h6 class="small-heading">Drawing Code</h6>
                        <ul class="list-unstyled mb-0">
                            <li><strong>Type:</strong> @DrawingNumber.BeltTypeCode</li>
                            <li><strong>Series:</strong> @DrawingNumber.BeltSeriesCode</li>
                            <li><strong>Color:</strong> @DrawingNumber.ColorCode</li>
                            <li><strong>Material:</strong> @DrawingNumber.MaterialCode</li>
                            <li><strong>Adder Material:</strong> @DrawingNumber.AdderMaterialCode</li>
                            <li><strong>Rod :</strong> @DrawingNumber.RodMaterialCode</li>
                            <li><strong>Belt Width:</strong> @DrawingNumber.BeltWidthCode</li>
                            <li><strong>Flights Rollers Grips:</strong> @DrawingNumber.FlightsRollersGripsCode</li>
                            <li><strong>Qty Rollers Across Width:</strong> @DrawingNumber.QtyRollersAcrossWidth</li>
                            <li><strong>FRG Centers:</strong> @DrawingNumber.FRGCenters</li>
                            <li><strong>Belt Accessories:</strong> @DrawingNumber.BeltAccessoriesCode</li>
                            <li><strong>Friction/Anti Static:</strong> @DrawingNumber.FrictionAntiStaticCode</li>
                            <li><strong>Side-PL/Lane-DV:</strong> @DrawingNumber.SidePLLaneDVCode</li>
                            <li><strong>Unique Identification:</strong> @DrawingNumber.UniqueIdentification</li>
                            <li><strong>Indent:</strong> @DrawingNumber.IndentCode</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="d-flex justify-content-center mt-4">
                <div class="text-center no-print">
    <div class="btn-group mt-2" role="group" aria-label="Button group with nested dropdown">
                <button type="button" class="btn btn-outline-secondary" @onclick="() => isFormVisible = true">
                    Edit
                </button>
    </div>
</div>
                
            </div>
        </div>
    }
</div>
